<!DOCTYPE html>
<meta charset="utf-8">
<style>

.axis--grid .domain {
  fill: #ddd;
  stroke: none;
}

.axis--x .domain,
.axis--grid .tick line {
  stroke: #fff;
}

.axis--grid .tick--minor line {
  stroke-opacity: .5;
}

</style>
<body>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script>

var margin = {top: 200, right: 40, bottom: 200, left: 40},
    width = 500;
    height = 500;
var randomX = d3.randomNormal(width / 2, 80),
    randomY = d3.randomNormal(height / 2, 80);

var nodes = d3.range(100).map((d,i)=>{
    return [
        randomX(),
        randomY()
    ]
})

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height)
    .append("g");

svg.selectAll(".node")
        .data(nodes)
        .enter()
        .append("circle")
        .attr("class","node")
        .attr("cx",function(d){
            return d[0];
        })
        .attr("cy",function(d){
            return d[1];
        })
        .attr("r",3)
        .attr("fill","black");


var brush = d3.brush()
    .extent([[0, 0], [width, height]])
    .on("start", brushStart).on("brush",brushed).on("end",brushend)

svg.append("g")
    .attr("class", "brush")
    .call(brush);

function brushStart(){

}

function brushed(){
    var extent = d3.event.selection;
    var p1 = extent[0],
        p2 = extent[1];
    d3.selectAll(".node")
        .attr("fill",function(d){
            if(d[0]>p1[0] && d[0]<p2[0] && d[1]>p1[1] && d[1]<p2[1])
                return "red"
        })
    // d3.selectAll("")
}
function brushend(){
    console.log(d3.event)
}
//
// function brushended() {
//   if (!d3.event.sourceEvent) return; // Only transition after input.
//   if (!d3.event.selection) return; // Ignore empty selections.
//   console.log(d3.event);
//   var d0 = d3.event.selection.map(x.invert),
//       d1 = d0.map(d3.timeDay.round);
//
//   // If empty when rounded, use floor & ceil instead.
//   if (d1[0] >= d1[1]) {
//     d1[0] = d3.timeDay.floor(d0[0]);
//     d1[1] = d3.timeDay.offset(d1[0]);
//   }
//
//   d3.select(this).transition().call(d3.event.target.move, d1.map(x));
// }

</script>
